<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<head>
<title>NMONVisualizer - JSON Format</title>
<link rel="stylesheet"href="nmonvisualizer.css" type="text/css" />
<link rel="icon" href="favicon.ico" type="image/png" />
</head>
<body>
<h1>NMONVisualizer</h1>
<h2 class="top">json</h2>

<div id="nav">
  <a class="bold" href="index.html">Home</a><br/>
  <a href="screenshots.html">Screenshots</a><br/>
  <a href="shortcuts.html">Keyboard Shortcuts</a><br/>
  <a href="iostat.html">IOStat</a><br/>
  <a href="fio.html">FIO</a><br/>
  <a class="b" href="json.html">JSON</a><br/>
  <a href="commandline.html">Command Line</a><br/>
  <a href="customreports.html">Custom Reports</a><br/>
  <a href="renaming.html">Renaming Hosts</a><br/>
  <a href="startup.html">Start nmon at Boot</a><br/>
  <hr/>
  <a href="https://github.com/nmonvisualizer/nmonvisualizer">Project on GitHub</a><br/>
  <a href="https://github.com/nmonvisualizer/nmonvisualizer/releases">Releases</a><br/>
  <a href="https://github.com/nmonvisualizer/nmonvisualizer/issues/new">Submit a Bug</a><br/>
</div>

<div id="content">
  <div class="section">
    <h2>Overview</h2>
    <p>NMONVisualizer can process JSON files, but they must be in the correct format. This format consists of 3 main objects: the metadata, the data type definitions and the actual data. These objects are defined as fields of the main JSON object, so they can be placed in the file <span class="i">in any order</span>.</p>
  </div>

  <div class="section">
    <h2>Metadata</h2>
    <p>The metadata section contains information about the JSON file being parsed. The following fields are <span class="i">required</i>:
    <ul>
    <li><span class="c">hostname</span><br/>The system name as a string. This can be the short name or the fully qualified domain name.</li>
    <li><span class="c">whenPattern</span><br/>A timestamp pattern as defined by Java's <span class="c">SimpleDateFormat</span> class. This string may contain a time zone pattern (<span class="c">z</span>, <span class="c">Z</span> or <span class="c">X</span> [Java 7 only]).</li>
    </ul>
    </p>
    <p>Two other fields are optional:
    <ul>
    <li><span class="c">timezone</span><br/>Either a string or a number. As a string, the value must return a valid value when used in a call to <span class="c">TimeZone.getTimeZone()</span> in Java. As a number, the value will be interpreted as the number of hours offset from UTC (either positive or negative).</li>
    <li><span class="c">metadata</span><br/>An object containing key value pairs as strings. These will be placed directly into the parsed data as metadata. These values can be viewed in the GUI by right clicking on the dataset and selecting <span class="c">Parsed File Info</span>.</li>
    </ul>
    </p>
    <p>Note that <span class="c">whenPattern</span> may include a time zone. If it does not <span class="i">and</span> no <span class="c">timezone</span> is specified, then the file will be parsed using the current timezone.</p> 
  </div>
  <div class="section">
    <h2>Data Types</h2>
    <p>This section defines the names and fields that will be used in the data section. A single array of objects, named <span class="c">types</span> is used to define this data. Each array entry (type) is an object containing the following:</p>
    <ul>
     <li><span class="c">id</span><br/>A short string used to uniquely identify the type within the data set. This can be the same as the <span class="c">name</span> if it is unique.</li>
     <li><span class="c">name</span><br/>A string used to descriptively name the type. This is the string that will be displayed in the GUI.</li>
     <li><span class="c">fields</span><br/>An array of strings denoting the fields, or values, defined by this type.
    </ul>
    <p>Optionally, a <span class="c">subtypes</span> array can be specified to indicate that the data type has subbordinate types. This allows similar data to be grouped together in the GUI. For example, all disks will have the same fields, but each disk could be named and displayed separately. <span class="c">subtypes</span> should be an array of strings.</p>
  </div>
  <div class="section">
    <h2>Data</h2>
    <p>The data section contains the actual data. A single array named <span class="c">data</span> contains all the values. Each element of the array contains all the data for a given time and contains the following fields:
    <ul>
     <li><span class="c">when</span><br/>The datetime for the data record. This value must be a string formatted as defined by <span class="c">whenPattern</span>.</li>
     <li>
       For each type, either of the following:
       <ul>
         <li>For basic types, an array of numbers containing the data for each type. The name of this array must be the name of a valid data type.</li>
         <li>For subtypes, an map (JSON object) containing an array for each subtype. The name of each array must be the name of a valid subtype.
       </ul>
       In both cases, any array <span class="i">must</span> contain data for all the <span class="c">fields</span> of the (sub)type <span class="i">in the order they were defined</span>.
     </li>
    </ul>
    </p>
   <p>If data for a particular (sub)type does not exist for a particular <span class="c">when</span> value, it can be skipped; <span class="c">null</span> or empty arrays <span class="i">should not</span> be used. However, if data for a particular <span class="c">field</span> does not exist but other fields are present at that time, <span class="c">null</span> should be used as the value. This will be interpreted as <span class="c">Double.NaN</span> by the GUI (i.e. a missing value).
  </div>

  <div class="section">
    <h2>Overview</h2>
    <ul>
      <li>hostname</li>
      <li>whenPattern</li>
      <li>optional timezone</li>
      <li>
         types, an array of objects
         <ul>
           <li>id</li>
           <li>name</li>
           <li>fields, an array of strings</li>
           <li>subtypes, an array of strings</li>
         </ul>
      </li>
      <li>
         data, an array of objects, one for each time
         <ul>
           <li>when, formatted using whenPattern</li>
           <li>
             for each type, either
             <ul>
               <li>an array of numbers for each type</li>
               <li>an object for each type with subtypes; for each subtype, an array of numbers</li>
             </ul>
          </li>
         </ul>
      </li>
    </ul>
  </div>

  <div class="section">
    <h2>Example</h2>
    <span class="c">
{
  "hostname": "dummy.rtp.raleigh.ibm.com",
  "whenPattern": "MM/dd/yyyy HH:mm:ss",
  "metadata": {
    "mdata1": "value 1",
    "mdata2": "value 2",
    "mdata3": "completely arbitrary data goes here"
  },
  "types": [
    {
      "id": "type1",
      "name": "type 1",
      "fields": [ "field11", "field12", "field13" ]
    },
    { 
      "id": "type2",
      "name": "type 2",
      "fields": [ "field21", "field22", "field23" ]
    },
    {
      "id": "type3",
      "name": "type 3",
      "fields" :[ "field31", "field32", "field33" ]
    },
    {
      "id": "type4",
      "name": "type 4",
      "subtypes": [ "sub41", "sub42", "sub43"],
      "fields" :[ "field41", "field42", "field43" ]
    },
    {
      "id": "type5",
      "name": "type 5",
      "subtypes": [ "sub51", "sub52", "sub53"],
      "fields" :[ "field51", "field52", "field53" ]
    }
  ],
  "data": [
    { "when": "10/15/2012 10:00:00",
      "type1": [ 1, 2, 3 ],
      "type2": [ 4, 5, 6 ],
      "type3": [ 1, 2 , 3 ],
      "type4": {
                 "sub41": [ 4, 5 , 6 ],
                 "sub42": [ 6, 7 , 8 ],
                 "sub43": [ 8, 9 , 10 ]
      },
      "type5": {
                 "sub51": [ 3, 2 , 1 ],
                 "sub52": [ 4, 3 , 2 ],
                 "sub53": [ 5, 4 , 3 ]
      }
    },
    { "when": "10/15/2012 10:00:30",
      "type1": [ 2, 3 , 4 ],
      "type2": [ 5, 6 , 7 ],
      "type3": [ 1, 2 , 3 ],
      "type4": {
                 "sub41": [ 4, 5 , 6 ],
                 "sub42": [ 6, 7 , 8 ],
                 "sub43": [ 8, 9 , 10 ]
      },
      "type5": {
                 "sub51": [ 3, 2 , 1 ],
                 "sub52": [ 4, 3 , 2 ],
                 "sub53": [ 5, 4 , 3 ]
      }
    },
    { "when": "10/15/2012 10:01:00",
      "type1": [ 1, 2 , 3 ],
      "type2": [ 4, 5 , 6 ],
      "type3": [ 1, 2 , 3 ],
      "type4": {
                 "sub41": [ 4, 5 , 6 ],
                 "sub42": [ 6, 7 , 8 ],
                 "sub43": [ 8, 9 , 10 ]
      },
      "type5": {
                 "sub51": [ 3, 2 , 1 ],
                 "sub52": [ 4, 3 , 2 ],
                 "sub53": [ 5, 4 , 3 ]
      }
    },
    { "when": "10/15/2012 10:01:30",
      "type1": [ 2, 3 , 4 ],
      "type2": [ 5, 6 , 7 ],
      "type3": [ 1, 2 , 3 ],
      "type4": {
                 "sub41": [ 4, 5 , 6 ],
                 "sub42": [ 6, 7 , 8 ],
                 "sub43": [ 8, 9 , 10 ]
      },
      "type5": {
                 "sub51": [ 3, 2 , 1 ],
                 "sub52": [ 4, 3 , 2 ],
                 "sub53": [ 5, 4 , 3 ]
      }
    },
    { "when" : "10/15/2012 10:02:00",
      "type1": [ 1, 2 , 3 ],
      "type2": [ 4, 5 , 6 ],
      "type3": [ 1, 2 , 3 ],
      "type4": {
                 "sub41": [ 4, 5 , 6 ],
                 "sub42": [ 6, 7 , 8 ],
                 "sub43": [ 8, 9 , 10 ]
      },
      "type5": {
                 "sub51": [ 3, 2 , 1 ],
                 "sub52": [ 4, 3 , 2 ],
                 "sub53": [ 5, 4 , 3 ]
      }
    }
  ]
}
    </span>
  </div>
</div>
</body>
</html>
