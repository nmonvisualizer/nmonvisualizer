<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<head>
<title>NMONVisualizer - Host Renaming</title>
<link rel="stylesheet"href="nmonvisualizer.css" type="text/css" />
<link rel="icon" href="favicon.ico" type="image/png" />
</head>
<body>
<h1>NMONVisualizer</h1>
<h2 class="top">host renaming</h2>

<div id="nav">
  <a class="bold" href="index.html">Home</a><br/>
  <a href="screenshots.html">Screenshots</a><br/>
  <a href="iostat.html">IOStat</a><br/>
  <a href="fio.html">FIO</a><br/>
  <a href="json.html">JSON</a><br/>
  <a href="commandline.html">Command Line</a><br/>
  <a href="customreports.html">Custom Reports</a><br/>
  <a class="b" href="renaming.html">Renaming Hosts</a><br/>
  <a href="startup.html">Start nmon at Boot</a><br/>
  <hr/>
  <a href="https://github.com/nmonvisualizer/nmonvisualizer">Project on GitHub</a><br/>
  <a href="https://github.com/nmonvisualizer/nmonvisualizer/releases">Releases</a><br/>
  <a href="https://github.com/nmonvisualizer/nmonvisualizer/issues/new">Submit a Bug</a><br/>
</div>

<div id="content">
  <div class="section">
    <h2>Overview</h2>
    <p>By default, NMONVisualizer names datasets by hostname. In many cases, this hostname may not be meaningful for reports or data analysis. To support friendly names for datasets, NMONVisualizer suports renaming by several methods. These can be accessed in the GUI via the <span class="c">Name Systems</span> submenu under the <span class="c">File</span> menu.</p>
    <p>Three additional methods of renaming are supported:
      <ul>
      <li>By LPAR name - using the <span class="c">Partition Name</span> from the <span class="c">lparstat -i</span> output embedded in nmon files.</li>
      <li>By nmon run name - using the <span class='c'>runname</span> attribute in the nmon <span class="c">AAA</span> records. This can be specified by using the <span class="c">-r</span> parameter when starting nmon.</li>
      <li>Using a custom JSON file to rename hosts directly, by regex or by the above two methods.</li>
      </ul>
     </p>
     <p>Note that if an nmon file does not have a runname or an LPAR name, the dataset will continue to be named using the default hostname.</p>
  </div>

  <div class="section">
    <h2>JSON Format</h2>
    <p>To rename datasets using more complicated rules, a JSON file must be provided. The format is simply an array of rule objects. Each rule takes two values: a name to match and an alias to rename to. Renaming rules are processed in the order specified in the file. The first rule to match stops any further rules from being evaluated.</p>

    <h3>Names</h3>
    <p>The name attribute can either be <span class="c">name</span> to indicate an exact hostname match or <span class="c">regex</span> to indicate hostname matching by regular expression. If a name attribute is not specified, then the alias will match <span class="i">all</span> hosts. This is useful for making the last element in the array a catch-all for hosts that to not match any previous names or regexes.</p>

    <h3>Aliases</h3>
    <p>The alias attribute can either be <span class="c">alias</span> (direct substition) or <span class="c">aliasRegex</span>. <span class="c">aliasRegex</span> is optional, the previous <span class="c">regex</span> can be reused.</p>
    <p>Two special aliases are supported: <span class="c">$RUN</span> and <span class="c">$LPAR</span>. These are used to indicate the run name and LPAR name, respectively.</p>
    <p>By default, renaming with a regex uses the first matching group (i.e. parentheses). This matching group will be used as the new hostname. The matching group can be changed by specifying the <span class="c">aliasByGroup</span> attribute. Full string replacement is also possible by specifying the <span class="c">aliasByReplacement</span> attribute.</p>

    <h3>Example</h3>
    <p>
      Here, names and aliases are used to directly rename datasets to user friendly names. If a host does not match, the LPAR name is used instead. Note the use of <span class="c">aliasByReplacement</span> to rename the web servers using the regex <span class="c">v1018h(0[2-3])</span>; <span class="c">web</span> is appended to each host number. Since brackets are special characters in JSON, they must be unicode escaped.
    <pre>
[
    { "name": "v1018h01",
      "alias": "loadbalancer"
    },
    { "name": "v1018h(0\u005b2-3\u005d)",
      "aliasByReplacement": "web$1"
    },
    { "name": "v1018h04",
      "alias": "app01"
    },
    { "name": "v1018h05",
      "alias": "app02"
    },
    { "name": "v1018h06",
      "alias": "app03"
    },
    { "name": "v1018h16",
      "alias": "database"
    },
    {
      "alias": "$LPAR"
    }
]
    </pre>
    </p>
  </div>
</div>
</body>
</html>
